<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Editor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Exo+2:wght@400;600;700&family=Pixelify+Sans:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../transition.css">
</head>
<body>
<button id="back-to-hub-btn" class="back-button" style="margin-bottom: 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; background: none; border: none; color: white; font-family: inherit;">
    <span>&larr;</span> <span>Back to Dashboard</span>
</button>
    <div class="container">
        <h1>Team Editor</h1>

        <div class="main-content">
            <div class="team-info-card">
                <div id="team-logo-card">TM</div>
                <h2 id="team-name-card" style="margin-bottom: 1rem;">Team Name</h2>
                <button id="control-team-btn" class="form-button">Control Team</button>
                <div class="player-stats-card">
                    <div><span>Overall</span><span id="team-ovr-card">--</span></div>
                    <div><span>Offense</span><span id="team-off-card">--</span></div>
                    <div><span>Defense</span><span id="team-def-card">--</span></div>
                    <div><span>W-L</span><span id="team-wl-card">0-0</span></div>
                    <div><span>Seed</span><span id="team-seed-card">-</span></div>
                </div>
            </div>
            <div class="editor-card">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="franchise">Franchise</button>
                    <button class="tab-btn" data-tab="staff">Staff</button>
                    <button class="tab-btn" data-tab="roster">Roster</button>
                    <button class="tab-btn" data-tab="season">Season</button>
                </div>

                <!-- Tab 1: Franchise -->
                <div id="franchise-tab" class="tab-content active">
                    <form id="franchise-form">
                        <div class="form-grid">
                            <div><label for="team-name">Name</label><input type="text" id="team-name"></div>
                            <div><label for="team-abbr">Abbreviation</label><input type="text" id="team-abbr" maxlength="4"></div>
                            <div><label for="team-tag">Tag</label><input type="number" id="team-tag"></div>
                            <div><label for="team-arena">Arena Name</label><input type="text" id="team-arena"></div>
                            <div><label for="team-coins">Coins</label><input type="number" id="team-coins"></div>
                            <div><label for="team-fans">Fans</label><input type="number" id="team-fans"></div>
                            <div><label for="team-morale">Morale</label><input type="number" id="team-morale" max="100"></div>
                        </div>

                        <div class="form-section">
                            <legend>History</legend>
                            <div class="form-grid">
                                <div>
                                    <label>Retired Numbers</label>
                                    <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                                        <input type="number" id="new-retired-num" placeholder="#" style="width: 80px;">
                                        <button type="button" id="add-retired-btn" style="padding: 0.5rem;">Add</button>
                                    </div>
                                    <div id="retired-numbers-container" style="display: flex; flex-wrap: wrap; gap: 0.5rem; min-height: 40px;">
                                        <!-- Retired numbers generated by JS -->
                                    </div>
                                </div>
                                <div>
                                    <legend style="font-size: 1rem; margin-bottom: 0.5rem;">Championships</legend>
                                    <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                                        <input type="number" id="new-champ-year" placeholder="YYYY" style="width: 100px;">
                                        <button type="button" id="add-champ-btn" style="padding: 0.5rem;">Add</button>
                                    </div>
                                    <div id="championships-list" style="display: flex; flex-wrap: wrap; gap: 0.5rem; min-height: 40px;">
                                        <!-- Championship tags generated by JS -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <legend>Draft Picks</legend>
                            <div class="form-grid" style="margin-bottom: 1rem;">
                                <div style="display: flex; gap: 0.5rem; align-items: flex-end;">
                                    <div><label>Year</label><input type="number" id="new-pick-yr" placeholder="2025" style="width: 100px;"></div>
                                    <div><label>Round</label><input type="number" id="new-pick-rd" placeholder="1" min="1" max="3" style="width: 60px;"></div>
                                    <button type="button" id="add-pick-btn" style="height: 42px;">Add Pick</button>
                                </div>
                            </div>
                            <div id="draft-picks-container" style="display: flex; flex-wrap: wrap; gap: 0.5rem; max-height: 200px; overflow-y: auto; padding-right: 5px;">
                                <!-- Draft picks generated by JS -->
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Tab 2: Staff -->
                <div id="staff-tab" class="tab-content">
                    <div id="staff-list" class="staff-grid">
                        <!-- Staff cards generated by JS -->
                    </div>
                </div>

                <!-- Tab 3: Roster -->
                <div id="roster-tab" class="tab-content">
                    <button id="poach-player-btn" class="form-button" style="width: 100%; margin-bottom: 1rem; background-color: #ef4444; color: white;">
                        <i class="fas fa-user-plus mr-2"></i> Poach Player (Add to Roster)
                    </button>
                    <div style="display: flex; justify-content: flex-end; margin-bottom: 1rem;">
                        <button type="button" id="mass-edit-btn" style="font-size: 0.8rem; padding: 0.5rem 1rem;">Mass Edit</button>
                    </div>
                    <div class="table-responsive">
                        <table class="roster-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Pos</th>
                                    <th>Age</th>
                                    <th>Pot</th>
                                    <th>Min</th>
                                </tr>
                            </thead>
                            <tbody id="roster-list">
                                <!-- Roster rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tab 4: Season -->
                <div id="season-tab" class="tab-content">
                    <div class="form-section">
                        <legend>Current Season Stats</legend>
                        <div class="form-grid">
                            <div><label for="season-wins">Wins</label><input type="number" id="season-wins"></div>
                            <div><label for="season-losses">Losses</label><input type="number" id="season-losses"></div>
                            <div><label for="season-streak">Streak</label><input type="number" id="season-streak" placeholder="+/-"></div>
                        </div>
                        <div style="margin-top: 1rem;">
                            <button type="button" id="save-season-stats-btn">Update Stats</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Staff Edit Modal -->
    <div id="staff-modal" class="modal modal-hidden">
        <div class="modal-content" style="max-width: 900px;">
            <span class="close-button">&times;</span>
            <h2>Edit Staff</h2>
            <form id="staff-edit-form">
                <div class="modal-grid-scroll">
                    <!-- Left Column: Bio & Attributes -->
                    <div>
                        <div class="form-section" style="margin-top: 0; padding-top: 0; border-top: none;">
                            <legend>Bio & Contract</legend>
                            <div class="form-grid">
                                <div><label for="staff-fn">First Name</label><input type="text" id="staff-fn"></div>
                                <div><label for="staff-ln">Last Name</label><input type="text" id="staff-ln"></div>
                                <div><label for="staff-age">Age</label><input type="number" id="staff-age"></div>
                                <div><label for="staff-yrs">Years</label><input type="number" id="staff-yrs"></div>
                                <div><label for="staff-sal">Salary ($M)</label><input type="number" id="staff-sal" step="0.1"></div>
                            </div>
                        </div>

                        <div class="form-section">
                            <legend>Attributes (Current / Max)</legend>
                            <div class="form-grid" style="grid-template-columns: 1fr;">
                                <!-- Development -->
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <label style="margin: 0; width: 100px;">Development</label>
                                    <div style="display: flex; gap: 1rem;">
                                        <div style="display: flex; align-items: center; gap: 2px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('development', 0, -1)">-</button>
                                            <input type="number" id="staff-dev-cur" readonly style="width: 40px; text-align: center; padding: 4px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('development', 0, 1)">+</button>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 2px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('development', 1, -1)">-</button>
                                            <input type="number" id="staff-dev-max" readonly style="width: 40px; text-align: center; padding: 4px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('development', 1, 1)">+</button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Motivation -->
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <label style="margin: 0; width: 100px;">Motivation</label>
                                    <div style="display: flex; gap: 1rem;">
                                        <div style="display: flex; align-items: center; gap: 2px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('motivation', 0, -1)">-</button>
                                            <input type="number" id="staff-mot-cur" readonly style="width: 40px; text-align: center; padding: 4px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('motivation', 0, 1)">+</button>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 2px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('motivation', 1, -1)">-</button>
                                            <input type="number" id="staff-mot-max" readonly style="width: 40px; text-align: center; padding: 4px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('motivation', 1, 1)">+</button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Leadership -->
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <label style="margin: 0; width: 100px;">Leadership</label>
                                    <div style="display: flex; gap: 1rem;">
                                        <div style="display: flex; align-items: center; gap: 2px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('leadership', 0, -1)">-</button>
                                            <input type="number" id="staff-ldr-cur" readonly style="width: 40px; text-align: center; padding: 4px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('leadership', 0, 1)">+</button>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 2px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('leadership', 1, -1)">-</button>
                                            <input type="number" id="staff-ldr-max" readonly style="width: 40px; text-align: center; padding: 4px;">
                                            <button type="button" class="rotation-btn" style="width: 24px;" onclick="adjustStaffAttr('leadership', 1, 1)">+</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <legend>Career Record</legend>
                            <div class="form-grid">
                                <div><label for="staff-wins">Wins</label><input type="number" id="staff-wins"></div>
                                <div><label for="staff-losses">Losses</label><input type="number" id="staff-losses"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Tactics & Rotations -->
                    <div>
                        <div class="form-section" style="margin-top: 0; padding-top: 0; border-top: none;">
                            <legend>Tactics (Tendencies)</legend>
                            <div class="form-grid">
                                <div>
                                    <label for="staff-off-focus">Off. Focus</label>
                                    <select id="staff-off-focus">
                                        <option value="0">Balanced</option>
                                        <option value="1">Inside</option>
                                        <option value="2">Midrange</option>
                                        <option value="3">Outside</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="staff-off-tempo">Off. Tempo</label>
                                    <select id="staff-off-tempo">
                                        <option value="0">Average</option>
                                        <option value="1">Fast Paced</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="staff-off-reb">Off. Rebounding</label>
                                    <select id="staff-off-reb">
                                        <option value="0">Balanced</option>
                                        <option value="1">Crashing Boards</option>
                                        <option value="2">Get Back On D</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="staff-def-focus">Def. Focus</label>
                                    <select id="staff-def-focus">
                                        <option value="0">Balanced</option>
                                        <option value="1">Interior</option>
                                        <option value="2">Perimeter</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="staff-def-agg">Def. Aggression</label>
                                    <select id="staff-def-agg">
                                        <option value="0">Average</option>
                                        <option value="1">Physical</option>
                                        <option value="2">Conservative</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="staff-def-reb">Def. Rebounding</label>
                                    <select id="staff-def-reb">
                                        <option value="0">Balanced</option>
                                        <option value="1">Crashing Boards</option>
                                        <option value="2">Fast Break</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <legend>Rotations</legend>
                            <div class="form-grid">
                                <div>
                                    <label for="staff-bench-depth">Bench Depth</label>
                                    <select id="staff-bench-depth">
                                        <option value="0">Average</option>
                                        <option value="1">Deep</option>
                                        <option value="2">Short</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="staff-bench-util">Bench Util.</label>
                                    <select id="staff-bench-util">
                                        <option value="0">Low</option>
                                        <option value="1">Medium</option>
                                        <option value="2">High</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="staff-closing">Closing Lineup</label>
                                    <select id="staff-closing">
                                        <option value="0">Starters</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            
            <div style="margin-top: 2rem; display: flex; justify-content: center;">
                <button type="button" id="save-staff-btn" style="width: 50%;">Save Staff</button>
            </div>
        </div>
    </div>

    <div id="mass-edit-modal" class="modal modal-hidden">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close-button">&times;</span>
            <h2>Mass Roster Edit</h2>
            <div style="display: grid; gap: 1rem; grid-template-columns: 1fr 1fr;">
                <button type="button" class="mass-edit-option" data-action="god-mode">
                    <div style="font-weight: bold; margin-bottom: 0.5rem;">All Max</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">Set all attributes to 10</div>
                </button>
                <button type="button" class="mass-edit-option" data-action="health-potion">
                    <div style="font-weight: bold; margin-bottom: 0.5rem;">Health Potion</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">Heal injuries & restore condition</div>
                </button>
                <button type="button" class="mass-edit-option" data-action="cap-cleaner">
                    <div style="font-weight: bold; margin-bottom: 0.5rem;">Free Contract</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">Set all salaries to $0M</div>
                </button>
                <button type="button" class="mass-edit-option" data-action="contract-lock">
                    <div style="font-weight: bold; margin-bottom: 0.5rem;">Contract Lock</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">Set 100 Years & NTC</div>
                </button>
            </div>
        </div>
    </div>

    <!-- Rotation Editor Modal -->
    <div id="minutes-modal" class="modal modal-hidden">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close-button">&times;</span>
            <h2>Edit Rotation</h2>
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <h3 id="min-modal-player-name" style="margin: 0; color: var(--color-main-accent);">Player Name</h3>
                <span id="min-modal-player-pos" style="color: var(--color-text-medium); font-size: 0.9rem;">POS</span>
            </div>
            
            <form id="minutes-form">
                <div class="form-grid" style="grid-template-columns: repeat(3, 1fr);">
                    <div style="grid-column: span 3; border-bottom: 1px solid var(--color-border); padding-bottom: 1rem; margin-bottom: 0.5rem;">
                        <label for="min-total">Target Total</label>
                        <input type="number" id="min-total" min="0" max="48" style="font-size: 1.5rem; text-align: center; color: var(--color-main-accent);">
                    </div>
                    
                    <div><label for="min-pg">PG</label><input type="number" id="min-pg" min="0" max="48"></div>
                    <div><label for="min-sg">SG</label><input type="number" id="min-sg" min="0" max="48"></div>
                    <div><label for="min-sf">SF</label><input type="number" id="min-sf" min="0" max="48"></div>
                    <div><label for="min-pf">PF</label><input type="number" id="min-pf" min="0" max="48"></div>
                    <div><label for="min-c">C</label><input type="number" id="min-c" min="0" max="48"></div>
                </div>
                
                <div style="margin-top: 2rem; display: flex; justify-content: center;">
                    <button type="button" id="save-minutes-btn" style="width: auto; padding-left: 3rem; padding-right: 3rem;">Save Rotation</button>
                </div>
            </form>
        </div>
    </div>

    <div id="toast"></div>
    <script src="../db.js"></script>
    <script src="../ui.js"></script>
    <script src="script.js"></script>
</body>
</html>