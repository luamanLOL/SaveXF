<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Player Editor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Exo+2:wght@400;600;700&family=Pixelify+Sans:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../transition.css">
</head>
<body>
<button id="back-to-hub-btn" class="back-button" style="margin-bottom: 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; background: none; border: none; color: white; font-family: inherit;">
    <span>&larr;</span> <span>Back to Dashboard</span>
</button>
    <div class="container">
        <h1>Local Player Editor</h1>

        <div class="main-content">
            <div class="player-info-card">
                <h2 id="player-name-card" style="margin-bottom: 1rem;">Player Name</h2>
                <div class="player-stats-card">
                    <div><span>Position</span><span id="player-position-card">N/A</span></div>
                    <div><span>Archetype</span><span id="player-archetype-card">N/A</span></div>
                    <div><span>Age</span><span id="player-age-card">N/A</span></div>
                    <div><span>Height</span><span id="player-height-card">N/A</span></div>
                    <div><span>Weight</span><span id="player-weight-card">N/A</span></div>
                    <!-- Live Rating Calculator -->
                    <div style="border-top: 2px solid var(--color-main-accent); margin-top: 10px; padding-top: 10px; display: flex; justify-content: space-between; align-items: center;">
                        <span style="font-weight: 700; letter-spacing: 1px; color: var(--color-text-medium);">RATING</span>
                        <span id="player-calc-rating" style="color: var(--color-main-accent);">--</span>
                    </div>
                </div>
            </div>
            <div class="editor-card">
                <button id="switch-team-btn" style="margin-bottom: 1.5rem; width: 100%; background-color: transparent; border: 2px solid var(--color-text-medium); color: var(--color-text-light);">Switch Team</button>
                <form id="player-editor-form">
                    <!-- Attribute Preview (Main Page) -->
                    <div class="form-section">
                        <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 style="margin: 0; font-family: 'Pixelify Sans', sans-serif; color: var(--color-main-accent);">Attributes</h3>
                            <button type="button" id="open-editor-btn">Edit</button>
                        </div>
                        <div id="attributes-preview-container">
                            <!-- Preview strip generated by script.js -->
                        </div>
                    </div>

                    <!-- Skills (Badges) -->
                    <div class="form-section">
                        <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 style="margin: 0; font-family: 'Pixelify Sans', sans-serif; color: var(--color-main-accent);">Skills (Badges)</h3>
                            <button type="button" id="open-skills-btn">Edit</button>
                        </div>
                        <div id="skills-preview-container" style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                            <!-- ik im going to forget to finish this -->
                        </div>
                    </div>

                    <div class="form-section">
                        <legend class="collapsible"><span>Bio & Physicals</span><span class="collapsible-indicator">&#x276F;</span></legend>
                        <div class="collapsible-content form-grid">
                            <div><label for="first-name">First Name</label><input type="text" id="first-name"></div>
                            <div><label for="last-name">Last Name</label><input type="text" id="last-name"></div>
                            <div><label for="age">Age</label><input type="number" id="age" inputmode="numeric" pattern="[0-9]*"></div>
                            <div><label for="height">Height</label><select id="height"></select></div>
                            <div><label for="weight">Weight</label><input type="number" id="weight" inputmode="numeric" pattern="[0-9]*"></div>
                            <div><label for="experience">Experience (Yrs)</label><input type="number" id="experience" inputmode="numeric" pattern="[0-9]*"></div>
                            <div class="input-group">
                                <label for="regression-age">Regression Age</label>
                                <input type="number" id="regression-age" class="stat-input">
                            </div>
                            <div><label for="player-tag">Tag</label><input type="number" id="player-tag" inputmode="numeric" pattern="[0-9]*"></div>
                            <div><label for="archetype">Archetype</label><input type="text" id="archetype"></div>
                            <div>
                                <label for="position">Position</label>
                                <select id="position">
                                    <option value="0">PG</option>
                                    <option value="1">G</option>
                                    <option value="2">SG</option>
                                    <option value="3">GF</option>
                                    <option value="4">SF</option>
                                    <option value="5">F</option>
                                    <option value="6">PF</option>
                                    <option value="7">FC</option>
                                    <option value="8">C</option>
                                </select>
                            </div>
                            <div><label for="condition">Condition</label><input type="number" id="condition" inputmode="numeric" pattern="[0-9]*"></div>
                            <div><label for="coins">Coins</label><input type="number" id="coins" inputmode="numeric" pattern="[0-9]*"></div>
                            <div><label for="fans">Fans</label><input type="number" id="fans" inputmode="numeric" pattern="[0-9]*"></div>
                            <div>
                                <label for="contract">Contract</label>
                                <button type="button" id="contract-button">Edit Contract</button>
                                <small style="display: block; color: var(--color-text-medium); margin-top: 5px;">Values are in millions (e.g. 1 = $1M)</small>
                            </div>
                        </div>
                    </div>

                    <!-- Season Stats -->
                    <div class="form-section">
                        <legend class="collapsible"><span>Season Stats</span><span class="collapsible-indicator">&#x276F;</span></legend>
                        <div class="collapsible-content">
                            <!-- Participation -->
                            <div style="margin-bottom: 1rem;">
                                <div style="font-size: 0.85rem; color: var(--color-main-accent); font-weight: bold; margin-bottom: 0.5rem; text-transform: uppercase;">Participation</div>
                                <div class="form-grid" style="grid-template-columns: 1fr 1fr;">
                                    <div><label for="stat_GP">Games Played</label><input type="number" id="stat_GP"></div>
                                    <div><label for="stat_GS">Games Started</label><input type="number" id="stat_GS"></div>
                                </div>
                            </div>

                            <!-- Scoring & Playmaking -->
                            <div style="margin-bottom: 1rem; border-top: 1px solid var(--color-border); padding-top: 1rem;">
                                <div style="font-size: 0.85rem; color: var(--color-main-accent); font-weight: bold; margin-bottom: 0.5rem; text-transform: uppercase;">Scoring & Playmaking</div>
                                <div class="form-grid">
                                    <div><label for="stat_PTS">Points</label><input type="number" id="stat_PTS"></div>
                                    <div><label for="stat_AST">Assists</label><input type="number" id="stat_AST"></div>
                                    <div><label for="stat_OREB">Offensive Rebounds</label><input type="number" id="stat_OREB"></div>
                                </div>
                            </div>

                            <!-- Shooting Splits -->
                            <div style="margin-bottom: 1rem; border-top: 1px solid var(--color-border); padding-top: 1rem;">
                                <div style="font-size: 0.85rem; color: var(--color-main-accent); font-weight: bold; margin-bottom: 0.5rem; text-transform: uppercase;">Shooting Splits</div>
                                <div class="form-grid" style="grid-template-columns: 1fr 1fr;">
                                    <div><label for="stat_FGM">Field Goals Made</label><input type="number" id="stat_FGM"></div>
                                    <div><label for="stat_FGA">Field Goals Att.</label><input type="number" id="stat_FGA"></div>
                                    <div><label for="stat_3PM">3-Pointers Made</label><input type="number" id="stat_3PM"></div>
                                    <div><label for="stat_3PA">3-Pointers Att.</label><input type="number" id="stat_3PA"></div>
                                    <div><label for="stat_FTM">Free Throws Made</label><input type="number" id="stat_FTM"></div>
                                    <div><label for="stat_FTA">Free Throws Att.</label><input type="number" id="stat_FTA"></div>
                                </div>
                            </div>

                            <!-- Defense & Discipline -->
                            <div style="border-top: 1px solid var(--color-border); padding-top: 1rem;">
                                <div style="font-size: 0.85rem; color: var(--color-main-accent); font-weight: bold; margin-bottom: 0.5rem; text-transform: uppercase;">Defense & Discipline</div>
                                <div class="form-grid">
                                    <div><label for="stat_DREB">Defensive Rebounds</label><input type="number" id="stat_DREB"></div>
                                    <div><label>Total Rebounds</label><input type="number" id="stat_TREB" readonly style="opacity: 0.7; background-color: rgba(255,255,255,0.05);"></div>
                                    <div><label for="stat_STL">Steals</label><input type="number" id="stat_STL"></div>
                                    <div><label for="stat_BLK">Blocks</label><input type="number" id="stat_BLK"></div>
                                    <div><label for="stat_TO">Turnovers</label><input type="number" id="stat_TO"></div>
                                    <div><label for="stat_PF">Fouls</label><input type="number" id="stat_PF"></div>
                                </div>
                            </div>

                            <div style="margin-top: 1.5rem; text-align: center;">
                                <button type="button" id="save-stats-btn" style="width: auto; padding: 0.75rem 3rem;">Save Stats</button>
                            </div>
                        </div>
                    </div>

                    <!-- Tendencies -->
                    <div class="form-section">
                        <legend class="collapsible"><span>Tendencies</span><span class="collapsible-indicator">&#x276F;</span></legend>
                        <div class="collapsible-content form-grid" id="tendencies-content">
                            <!-- Dynamically generated SELECTS will go here -->
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>

    <!-- Contract Modal -->
    <div id="contract-modal" class="modal-hidden">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Edit Contract</h2>
            <div class="form-grid">
                <div>
                    <label for="contract_salary">Salary</label>
                    <input type="number" id="contract_salary" inputmode="decimal">
                    <small style="display: block; color: var(--color-text-medium); margin-top: 5px;">(1 = $1M, 100 = $100M)</small>
                </div>
                <div><label for="contract_years">Years</label><input type="number" id="contract_years" inputmode="numeric" pattern="[0-9]*"></div>
                <div class="switch-container" style="margin-top: 1rem;"><label for="contract_ntc">No-Trade Clause</label><input type="checkbox" id="contract_ntc"></div>
            </div>
             <button type="button" id="save-contract-button">Save Contract</button>
        </div>
    </div>

    <!-- Attribute Editor Modal -->
    <div id="attribute-editor-modal" class="modal-hidden">
        <div class="modal-content" style="max-width: 1000px;">
            <div id="attr-modal-actions" style="position: absolute; top: 1rem; right: 4rem; display: flex; gap: 0.5rem; z-index: 10;">
                <button type="button" id="btn-max-all" style="font-size: 0.8rem; padding: 0.25rem 0.5rem; width: auto;">MAX ALL</button>
                <button type="button" id="btn-reset-all" style="font-size: 0.8rem; padding: 0.25rem 0.5rem; width: auto;">RESET</button>
            </div>
            <span class="close-button">&times;</span>
            <h2 style="margin-bottom: 1.5rem;">Edit Attributes</h2>
            <div id="attributes-editor-grid">
                <!-- Editor Grid generated by script.js -->
            </div>
             <div style="display: flex; justify-content: center; margin-top: 2rem;">
                <button type="button" id="save-attributes-button" style="width: auto; padding-left: 3rem; padding-right: 3rem;">Save Attributes</button>
            </div>
        </div>
    </div>

    <!-- Skills Editor Modal -->
    <div id="skills-editor-modal" class="modal-hidden">
        <div class="modal-content" style="max-width: 1000px;">
            <span class="close-button">&times;</span>
            <h2 style="margin-bottom: 1.5rem;">Edit Skills</h2>
            <div id="skills-editor-grid">
                <!-- Skills generated by script.js -->
            </div>
             <div style="display: flex; justify-content: center; margin-top: 2rem;">
                <button type="button" id="save-skills-button" style="width: auto; padding-left: 3rem; padding-right: 3rem;">Save Skills</button>
            </div>
        </div>
    </div>

    <div id="toast"></div>
    <script src="../db.js"></script>
    <script src="script.js"></script>
</body>
</html>